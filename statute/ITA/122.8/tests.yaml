# Income Tax Act Section 122.8 - Climate Action Incentive Payment Tests
#
# Test cases for validating Climate Action Incentive Payment (CAIP) calculations.
# Uses 2024-2025 payment year amounts.
#
# CAIP applies only to residents of:
# - Alberta, Saskatchewan, Manitoba, Ontario
# - (other provinces have their own carbon pricing programs)
#
# 2024-2025 CAIP Amounts (annual, by province):
# Ontario:
#   - Individual: $280
#   - Spouse: $140
#   - Child (each): $70
#   - Rural supplement: 20%
#
# Alberta:
#   - Individual: $225
#   - Spouse: $112.50
#   - Child: $56.25
#   - Rural supplement: 20%
#
# Saskatchewan:
#   - Individual: $376
#   - Spouse: $188
#   - Child: $94
#   - Rural supplement: 20%
#
# Manitoba:
#   - Individual: $225
#   - Spouse: $112.50
#   - Child: $56.25
#   - Rural supplement: 20%
#
# Reference: https://www.canada.ca/en/revenue-agency/services/child-family-benefits/cai-payment.html

reference: "ITA Section 122.8"
benefit_year: "2024-2025"

tests:
  # ==========================================================================
  # ONTARIO TESTS
  # ==========================================================================

  # Test 1: Single individual, Ontario, urban
  - name: "Single individual, Ontario, urban"
    inputs:
      province: ON
      is_married_or_common_law: false
      num_children_under_19: 0
      is_rural: false
    expected:
      caip_amount: 280
      caip_quarterly: 70
    notes: "Base amount for single individual in Ontario"

  # Test 2: Single individual, Ontario, rural
  - name: "Single individual, Ontario, rural"
    inputs:
      province: ON
      is_married_or_common_law: false
      num_children_under_19: 0
      is_rural: true
    expected:
      # $280 * 1.20 = $336
      caip_amount: 336
      caip_quarterly: 84
    notes: "20% rural supplement"

  # Test 3: Married couple, Ontario, no children
  - name: "Married couple, Ontario, no children"
    inputs:
      province: ON
      is_married_or_common_law: true
      num_children_under_19: 0
      is_rural: false
    expected:
      # $280 + $140 = $420
      caip_amount: 420
    notes: "Individual + spouse amounts"

  # Test 4: Family with children, Ontario
  - name: "Family with two children, Ontario"
    inputs:
      province: ON
      is_married_or_common_law: true
      num_children_under_19: 2
      is_rural: false
    expected:
      # $280 + $140 + (2 * $70) = $560
      caip_amount: 560
    notes: "Full family amount"

  # Test 5: Family with children, Ontario, rural
  - name: "Family with two children, Ontario, rural"
    inputs:
      province: ON
      is_married_or_common_law: true
      num_children_under_19: 2
      is_rural: true
    expected:
      # ($280 + $140 + $140) * 1.20 = $672
      caip_amount: 672
    notes: "Family with rural supplement"

  # ==========================================================================
  # ALBERTA TESTS
  # ==========================================================================

  # Test 6: Single individual, Alberta, urban
  - name: "Single individual, Alberta, urban"
    inputs:
      province: AB
      is_married_or_common_law: false
      num_children_under_19: 0
      is_rural: false
    expected:
      caip_amount: 225
    notes: "Base amount for Alberta"

  # Test 7: Family, Alberta, rural
  - name: "Family with one child, Alberta, rural"
    inputs:
      province: AB
      is_married_or_common_law: true
      num_children_under_19: 1
      is_rural: true
    expected:
      # ($225 + $112.50 + $56.25) * 1.20 = $472.50
      caip_amount: 472.50
    notes: "Alberta family with rural supplement"

  # ==========================================================================
  # SASKATCHEWAN TESTS
  # ==========================================================================

  # Test 8: Single individual, Saskatchewan
  - name: "Single individual, Saskatchewan, urban"
    inputs:
      province: SK
      is_married_or_common_law: false
      num_children_under_19: 0
      is_rural: false
    expected:
      caip_amount: 376
    notes: "Saskatchewan has highest amounts due to higher carbon price impact"

  # Test 9: Family, Saskatchewan, rural
  - name: "Family with three children, Saskatchewan, rural"
    inputs:
      province: SK
      is_married_or_common_law: true
      num_children_under_19: 3
      is_rural: true
    expected:
      # ($376 + $188 + (3 * $94)) * 1.20 = $1,014.40
      caip_amount: 1014.40
    notes: "Large Saskatchewan family with rural supplement"

  # ==========================================================================
  # MANITOBA TESTS
  # ==========================================================================

  # Test 10: Single individual, Manitoba
  - name: "Single individual, Manitoba, urban"
    inputs:
      province: MB
      is_married_or_common_law: false
      num_children_under_19: 0
      is_rural: false
    expected:
      caip_amount: 225
    notes: "Manitoba base amount"

  # ==========================================================================
  # INELIGIBLE PROVINCE TESTS
  # ==========================================================================

  # Test 11: BC resident (not eligible)
  - name: "BC resident - not eligible"
    inputs:
      province: BC
      is_married_or_common_law: false
      num_children_under_19: 0
      is_rural: false
    expected:
      caip_amount: 0
    notes: "BC has provincial climate action tax credit instead"

  # Test 12: Quebec resident (not eligible)
  - name: "Quebec resident - not eligible"
    inputs:
      province: QC
      is_married_or_common_law: false
      num_children_under_19: 0
      is_rural: false
    expected:
      caip_amount: 0
    notes: "Quebec has own carbon pricing system"

  # ==========================================================================
  # SINGLE PARENT TESTS
  # ==========================================================================

  # Test 13: Single parent, Ontario
  - name: "Single parent with two children, Ontario"
    inputs:
      province: ON
      is_married_or_common_law: false
      num_children_under_19: 2
      is_rural: false
    expected:
      # $280 + (2 * $70) = $420
      caip_amount: 420
    notes: "Single parent gets individual amount plus child amounts"

  # ==========================================================================
  # QUARTERLY PAYMENT TESTS
  # ==========================================================================

  # Test 14: Quarterly payment amounts
  - name: "Quarterly CAIP payment"
    inputs:
      province: ON
      is_married_or_common_law: true
      num_children_under_19: 0
      is_rural: false
    expected:
      caip_amount: 420
      caip_quarterly: 105
    notes: "Payments made April, July, October, January"
